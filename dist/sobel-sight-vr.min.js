"use strict";window.addEventListener("load",()=>{const renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0});renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(renderer.domElement);let effect=new THREE.VREffect(renderer);effect.separation=0,effect.setSize(window.innerWidth,window.innerHeight);let vrDisplay;navigator.getVRDisplays().then(displays=>displays.length&&(vrDisplay=displays[0]));VRSamplesUtil.addButton("Enter VR","E","/images/cardboard64.png",()=>{navigator.userAgent.includes("Mobile VR")?vrDisplay.requestPresent([{source:renderer.domElement}]):((effect=new THREE.StereoEffect(renderer)).separation=0,effect.setSize(window.innerWidth,window.innerHeight),document.getElementById("vr-sample-button-container").style.display="none")});const scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(100,window.innerWidth/window.innerHeight,1,1e3);camera.position.z=500,scene.add(camera),camera.rotation.order="YXZ";const textureCanvas=document.createElement("canvas");textureCanvas.height=1024,textureCanvas.width=2048;const textureContext=textureCanvas.getContext("2d"),texture=new THREE.Texture(textureCanvas);textureContext.beginPath(),textureContext.rect(0,0,textureCanvas.width,textureCanvas.height),textureContext.fillStyle="pink",textureContext.fill();const boxGeometry=new THREE.BoxGeometry(1300,1e3,1),boxMaterial=new THREE.MeshBasicMaterial({map:texture}),box=new THREE.Mesh(boxGeometry,boxMaterial);box.rotation.order="YXZ",scene.add(box),texture.minFilter=THREE.NearestFilter;let controls=new THREE.OrbitControls(camera,renderer.domElement);controls.target.set(camera.position.x+.15,camera.position.y,camera.position.z),controls.noPan=!0,controls.noZoom=!0;const setOrientationControls=event=>{event.alpha&&(controls=new THREE.VRControls(camera)).update(),window.removeEventListener("deviceorientation",setOrientationControls)};window.addEventListener("deviceorientation",setOrientationControls);const render=()=>{requestAnimationFrame(render),controls.update(),texture.needsUpdate=!0,effect.render(scene,camera)};render(),window.location.href.includes("localhost")||renderer.domElement.addEventListener("click",()=>{(new NoSleep).enable(),document.fullscreenEnabled&&renderer.domElement.requestFullScreen()||document.webkitFullscreenEnabled&&renderer.domElement.webkitRequestFullScreen()||document.mozFullScreenEnabled&&renderer.domElement.mozRequestFullScreen()||document.msFullScreenEnabled&&renderer.domElement.msRequestFullScreen()}),window.addEventListener("resize",()=>{effect.setSize(window.innerWidth,window.innerHeight),camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix()})});