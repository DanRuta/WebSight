{"version":3,"sources":["websight.es5.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","degToRad","x","Math","PI","window","addEventListener","renderer","THREE","WebGLRenderer","antialias","alpha","setSize","innerWidth","innerHeight","document","body","appendChild","domElement","style","backgroundColor","effect","VREffect","separation","vrDisplay","navigator","getVRDisplays","then","displays","enterVRButton","controls","getElementById","classList","contains","closeVR","remove","userAgent","includes","requestPresent","source","StereoEffect","add","scene","Scene","camera","PerspectiveCamera","texture","boxMaterial","box","makeBoxObject","video","createElement","autoplay","width","height","getVideoFeed","boxWidth","boxHeight","boxGeometry","BoxGeometry","Texture","minFilter","NearestFilter","ShaderMaterial","uniforms","type","value","radius","intensity","edgeR","edgeG","edgeB","surfaceR","surfaceG","surfaceB","vertexShader","vertexShaderSource","text","fragmentShader","Filters","compileShader","Mesh","position","z","atan","getVideoFeedAttempts","mediaDevices","getUserMedia","facingMode","stream","src","URL","createObjectURL","catch","err","console","log","alert","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","e","render","requestAnimationFrame","currentTime","needsUpdate","location","href","fullscreenEnabled","requestFullScreen","webkitFullscreenEnabled","webkitRequestFullScreen","mozFullScreenEnabled","mozRequestFullScreen","msFullScreenEnabled","msRequestFullScreen","aspect","updateProjectionMatrix","pause","setShader","querySelector","dataset","filter","setIntensity","parseFloat","setRadius","shader","val","toggleInverted","isInverted","setEdgeColour","_ref","_ref$r","r","undefined","_ref$g","g","_ref$b","b","surfaceCache","setSurfaceColour","_ref2","_ref2$r","_ref2$g","_ref2$b","toggleReducedColours","hasReducedColours","toggleBackground","isBackground","hasBackground","this","name","addBackground","reducedColoursBody","invertedBody","get","filters","availableFilters","initialFilter","localStorage","getItem","controlsRoot","filtersRoot","getElementsByClassName","slidersRoot","filterButtons","map","button","toLowerCase","replace","innerText","disabled","radiusSlider","id","parseInt","min","max","step","radiusLabel","for","radiusValue","intensitySlider","intensityLabel","intensityValue","_ref3","forEach","setItem","updateRadius","_ref4","updateIntensity","_ref5","toggle","invertedCheckbox","reducedColoursCheckbox","backgroundCheckbox","setBlueEdgesButton","setGreenEdgesButton","setRedBackgroundButton","setYellowBackgroundButton"],"mappings":"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","file":"websight.min.js"}