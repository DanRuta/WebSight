{"version":3,"sources":["../dev/js/sobel-vr.js"],"names":[],"mappings":"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","file":"sobel-sight-vr.concat.js","sourcesContent":["\"use strict\"\r\n\r\nwindow.addEventListener(\"load\", () => {\r\n\r\n    // Renderer and VR stuff\r\n    const renderer = new THREE.WebGLRenderer({antialias: true, alpha: true}) // Maybe no antialiasing for fps? Needs testing\r\n    renderer.setSize(window.innerWidth, window.innerHeight)\r\n    document.body.appendChild(renderer.domElement)\r\n\r\n    let effect = new THREE.VREffect(renderer)\r\n    effect.separation = 0\r\n    effect.setSize(window.innerWidth, window.innerHeight)\r\n\r\n    let vrDisplay\r\n    navigator.getVRDisplays().then(displays => displays.length && (vrDisplay = displays[0]))\r\n\r\n    // Button to enable VR mode\r\n    const vrButton = VRSamplesUtil.addButton(\"Enter VR\", \"E\", \"/images/cardboard64.png\", () => {\r\n\r\n        if (navigator.userAgent.includes(\"Mobile VR\")) {\r\n            vrDisplay.requestPresent([{source: renderer.domElement}])\r\n        } else {\r\n            effect = new THREE.StereoEffect(renderer)\r\n            effect.separation = 0\r\n            effect.setSize(window.innerWidth, window.innerHeight)\r\n            document.getElementById(\"vr-sample-button-container\").style.display = \"none\"\r\n        }\r\n    })\r\n\r\n    // Scenes and camera\r\n    const scene = new THREE.Scene()\r\n    const camera = new THREE.PerspectiveCamera(100, window.innerWidth / window.innerHeight, 1, 1000)\r\n    camera.position.z = 500\r\n    scene.add(camera)\r\n    camera.rotation.order = \"YXZ\"\r\n\r\n    // Canvases and textures\r\n    const textureCanvas = document.createElement(\"canvas\")\r\n    textureCanvas.height = 1024\r\n    textureCanvas.width = 2048\r\n    const textureContext = textureCanvas.getContext(\"2d\")\r\n\r\n    const texture = new THREE.Texture(textureCanvas)\r\n\r\n\r\n        // TEMP\r\n        textureContext.beginPath()\r\n        textureContext.rect(0,0, textureCanvas.width, textureCanvas.height)\r\n        textureContext.fillStyle = \"pink\"\r\n        textureContext.fill()\r\n\r\n\r\n\r\n\r\n    // Box object\r\n    const boxGeometry = new THREE.BoxGeometry(1300, 1000, 1)\r\n    const boxMaterial = new THREE.MeshBasicMaterial({map: texture})\r\n    const box = new THREE.Mesh(boxGeometry, boxMaterial)\r\n    box.rotation.order = \"YXZ\"\r\n    scene.add(box)\r\n\r\n    // Set minFilter value, to resolve the power of two issue\r\n    texture.minFilter = THREE.NearestFilter\r\n\r\n\r\n    // Controls\r\n    let controls = new THREE.OrbitControls(camera, renderer.domElement)\r\n    controls.target.set(camera.position.x+0.15, camera.position.y, camera.position.z)\r\n    controls.noPan = true\r\n    controls.noZoom = true\r\n\r\n    // Set VR controls if available\r\n    const setOrientationControls = event => {\r\n        if (event.alpha) {\r\n            controls = new THREE.VRControls(camera)\r\n            controls.update()\r\n        }\r\n        window.removeEventListener(\"deviceorientation\", setOrientationControls)\r\n    }\r\n    window.addEventListener(\"deviceorientation\", setOrientationControls)\r\n\r\n\r\n    // Render loop\r\n    // ===========\r\n    const render = () => {\r\n        requestAnimationFrame(render)\r\n        controls.update()\r\n\r\n        texture.needsUpdate = true\r\n\r\n        effect.render(scene, camera)\r\n    }\r\n    render()\r\n\r\n    // Do fullscreen + prevent the display from going to sleep when tapped\r\n    if (!window.location.href.includes(\"localhost\")) {\r\n\r\n        renderer.domElement.addEventListener(\"click\", () => {\r\n\r\n            new NoSleep().enable()\r\n\r\n            document.fullscreenEnabled && renderer.domElement.requestFullScreen() ||\r\n            document.webkitFullscreenEnabled && renderer.domElement.webkitRequestFullScreen() ||\r\n            document.mozFullScreenEnabled && renderer.domElement.mozRequestFullScreen() ||\r\n            document.msFullScreenEnabled && renderer.domElement.msRequestFullScreen()\r\n        })\r\n    }\r\n\r\n    // Resizing\r\n    window.addEventListener(\"resize\", () => {\r\n        effect.setSize(window.innerWidth, window.innerHeight)\r\n        camera.aspect = window.innerWidth / window.innerHeight\r\n        camera.updateProjectionMatrix()\r\n    })\r\n})"]}